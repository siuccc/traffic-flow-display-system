# 交通流量数据展示系统

## 项目简介
基于Flask的交通流量数据分析Web应用，支持多维度搜索、数据可视化和统计分析。

## 核心功能
- 🔍 **多维度搜索**: 按时间段、方向进行精确搜索
- 📊 **数据可视化**: 方向分布饼图、24小时趋势图、工作日vs周末对比图  
- 📄 **智能分页**: 高效处理880万+记录的分页浏览
- 📈 **统计分析**: 车流量趋势分析、高峰期识别、平均值计算

## 快速开始

### 环境要求
- Python 3.8+
- pip包管理工具

### 安装运行
```bash
# 1. 克隆项目
git clone https://github.com/siuccc/traffic-flow-display-system.git
cd traffic-flow-display-system

# 2. 安装依赖
pip install -r requirements.txt

# 3. 启动应用
python3 app.py

# 4. 浏览器访问
http://localhost:5001
```

## 最新更新 (v0.7.0 - 2025-07-31)

### ✨ 新增功能
- **工作日vs周末对比分析**: 智能计算平均每小时车流量，避免数据量差异影响对比结果
- **统计学意义修正**: 工作日5天vs周末2天的公平对比算法
- **代码重构优化**: 统一常量管理，消除重复代码

### 📊 图表功能
- **方向分布饼图**: 4个方向的车流量占比分析
- **24小时趋势图**: 全天车流量变化趋势
- **工作日周末对比**: 显示工作日和周末的平均每小时车流量差异

### 🔍 搜索功能  
- **时间段搜索**: 早高峰、中午、下午、晚高峰、夜间
- **方向筛选**: 北往南、南往北、东往西、西往东
- **复合搜索**: 支持时间段+方向的组合筛选

## 技术架构

### 技术栈
- **后端**: Flask 3.1.1 + Python 3.12
- **数据库**: SQLite (880万+交通记录)
- **可视化**: Plotly 5.24.1 (交互式图表)
- **前端**: HTML5 + CSS3 + JavaScript

### 项目结构
```
交通流量数据展示系统/
├── app.py                  # Flask应用主入口
├── requirements.txt        # 项目依赖
├── utils/                  # 核心工具模块
│   ├── database.py         # 数据库操作
│   ├── chart_generator.py  # 图表生成  
│   └── constants.py        # 常量管理
├── templates/              # HTML模板
│   ├── base.html          
│   └── index.html         
├── static/                 # 静态资源
│   ├── css/style.css      
│   └── js/pagination.js   
├── data/                   
│   └── traffic.db          # 交通数据库
└── tests/                  # 测试文件
```

## 数据说明

### 数据库结构
```sql
表名: traffic
- id (INTEGER)       - 主键
- direction (INTEGER) - 方向 (1-4)
- time (REAL)        - Unix时间戳  
- plate (TEXT)       - 车牌号
```

### 数据规模
- 总记录数: 8,845,000+ 条
- 时间跨度: 完整的交通流量历史数据
- 方向覆盖: 4个主要交通方向
- 数据质量: 完整的时间戳和方向信息

## 版本历史

### v0.7.0 (2025-07-31) 🎯
- ✅ **工作日vs周末对比分析**: 修正统计算法，使用平均每小时车流量进行公平对比
- ✅ **代码重构**: 统一常量管理，创建utils/constants.py模块
- ✅ **图表优化**: 3个图表完整实现 - 方向分布、24小时趋势、工作日周末对比

### v0.6.1 (2025-07-30) 
- ✅ **24小时趋势图**: 完整实现时间维度数据分析
- ✅ **双图表布局**: 饼图+趋势图垂直布局优化

### v0.6.0 (2025-07-29)
- ✅ **数据可视化**: Plotly交互式图表系统上线
- ✅ **图表生成模块**: chart_generator.py专业工具类

### v0.5.0 (2025-07-28) 
- ✅ **时间段搜索**: 5个预定义时间段智能搜索
- ✅ **复合搜索**: 时间段+方向多维度筛选

### v0.4.0 (2025-07-25)
- ✅ **分页系统**: 高效处理880万+记录
- ✅ **JavaScript交互**: 页码跳转和输入验证

### v0.3.0 (2025-07-24)
- ✅ **HTML模板**: Jinja2模板引擎集成
- ✅ **项目管理**: start.sh/stop.sh脚本

### v0.2.0 (2025-07-23)  
- ✅ **Flask基础**: 数据库连接和路由系统
- ✅ **Git管理**: GitHub远程仓库建立

### v0.1.0 (2025-07-23)
- 🎉 **项目初始化**: 技术栈确定和架构设计

---

**当前版本**: v0.7.0 | **Python**: 3.12.6 | **Flask**: 3.1.1 | **创建**: 2025-07-23

